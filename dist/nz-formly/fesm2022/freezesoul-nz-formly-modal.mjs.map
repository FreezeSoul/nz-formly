{"version":3,"file":"freezesoul-nz-formly-modal.mjs","sources":["../../../lib/modal/modal.component.ts","../../../lib/modal/modal.module.ts","../../../lib/modal/freezesoul-nz-formly-modal.ts"],"sourcesContent":["import { Component, OnInit, Optional, ViewChild } from '@angular/core';\r\nimport { FieldType } from '@ngx-formly/core';\r\nimport { NzModalComponent } from 'ng-zorro-antd/modal';\r\nimport { FormlyFieldConfig } from '@ngx-formly/core/lib/models';\r\nimport { FormlyBoxTemplates, resolveTplName } from '@freezesoul/nz-formly/common';\r\n\r\n@Component({\r\n  selector: 'nz-formly-modal',\r\n  template: `\r\n    <nz-modal\r\n      *ngIf=\"props.nzVisible\"\r\n      #nzModal\r\n      nzxModalDrag\r\n      [nzVisible]=\"true\"\r\n      [nzTitle]=\"props.label || nzTitle\"\r\n      [formlyAttributes]=\"field\"\r\n      [nzAutofocus]=\"props.nzAutofocus\"\r\n      [nzBodyStyle]=\"props.nzBodyStyle\"\r\n      [nzCancelDisabled]=\"props.nzCancelDisabled\"\r\n      [nzCancelLoading]=\"props.nzCancelLoading\"\r\n      [nzCancelText]=\"props.nzCancelText\"\r\n      [nzCentered]=\"props.nzCentered\"\r\n      [nzClassName]=\"props.nzClassName\"\r\n      [nzClosable]=\"props.nzClosable\"\r\n      [nzCloseIcon]=\"nzCloseIcon\"\r\n      [nzCloseOnNavigation]=\"props.nzCloseOnNavigation\"\r\n      [nzComponentParams]=\"props.nzComponentParams\"\r\n      [nzFooter]=\"nzFooter\"\r\n      [nzIconType]=\"props.nzIconType\"\r\n      [nzKeyboard]=\"props.nzKeyboard\"\r\n      [nzMask]=\"props.nzMask\"\r\n      [nzMaskClosable]=\"props.nzMaskClosable\"\r\n      [nzMaskStyle]=\"props.nzMaskStyle\"\r\n      [nzModalType]=\"props.nzModalType\"\r\n      [nzNoAnimation]=\"props.nzNoAnimation\"\r\n      [nzOkDanger]=\"props.nzOkDanger\"\r\n      [nzOkDisabled]=\"props.nzOkDisabled\"\r\n      [nzOkLoading]=\"props.nzOkLoading\"\r\n      [nzOkText]=\"props.nzOkText\"\r\n      [nzOkType]=\"props.nzOkType\"\r\n      [nzStyle]=\"props.nzStyle\"\r\n      [nzWidth]=\"props.nzWidth\"\r\n      [nzWrapClassName]=\"props.nzWrapClassName\"\r\n      [nzZIndex]=\"props.nzZIndex\"\r\n      (nzAfterClose)=\"props.onAfterClose?.(field, instance)\"\r\n      (nzAfterOpen)=\"props.nzAfterOpen?.(field, instance)\"\r\n      (nzOnCancel)=\"props.nzOnCancel(field, instance)\"\r\n      (nzOnOk)=\"props.nzOnOk(field, instance)\"\r\n      (nzVisibleChange)=\"props.nzVisibleChange?.($event, field)\"\r\n    >\r\n      <ng-container *nzModalContent>\r\n        <formly-field [field]=\"item\" *ngFor=\"let item of field.fieldGroup\"></formly-field>\r\n        <ng-container *nzStringTemplateOutlet=\"nzContent; context: { $implicit: field, options: props }\">\r\n          {{ nzContent }}\r\n        </ng-container>\r\n      </ng-container>\r\n    </nz-modal>\r\n  `\r\n})\r\nexport class FormlyFieldModalComponent extends FieldType implements OnInit {\r\n  @ViewChild('nzModal', { static: true }) instance!: NzModalComponent;\r\n  override defaultOptions = {\r\n    props: {\r\n      nzOkType: 'primary',\r\n      nzCloseOnNavigation: true,\r\n      nzMaskClosable: false,\r\n      nzKeyboard: false,\r\n      nzClosable: true,\r\n      nzMask: true,\r\n      nzIconType: 'question-circle',\r\n      nzAutofocus: 'auto',\r\n      nzWidth: 520,\r\n      nzVisible: false,\r\n      nzCloseIcon: 'close',\r\n      nzOnCancel: (field: FormlyFieldConfig, instance: NzModalComponent) => (field.props!.nzVisible = false),\r\n      nzOnOk: (field: FormlyFieldConfig, instance: NzModalComponent) => (field.props!.nzVisible = false)\r\n    }\r\n  };\r\n  constructor(@Optional() public fieldTemplates: FormlyBoxTemplates) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.props.instance = this.instance;\r\n    this.props.init?.(this.instance, this);\r\n  }\r\n\r\n  get nzTitle() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'nzTitle');\r\n  }\r\n\r\n  get nzFooter() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'nzFooter');\r\n  }\r\n\r\n  get nzCloseIcon() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'nzCloseIcon');\r\n  }\r\n\r\n  get nzContent() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'nzContent');\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NzModalModule } from 'ng-zorro-antd/modal';\r\nimport { FormlyFieldModalComponent } from './modal.component';\r\nimport { FormlyModule } from '@ngx-formly/core';\r\nimport { NzxModalModule } from '@freezesoul/nzx-antd/modal';\r\nimport { NzOutletModule } from 'ng-zorro-antd/core/outlet';\r\n\r\nconst COMPONENT = FormlyFieldModalComponent;\r\n\r\n@NgModule({\r\n  declarations: [COMPONENT],\r\n  imports: [\r\n    CommonModule,\r\n    NzModalModule,\r\n    NzxModalModule,\r\n    NzOutletModule,\r\n    FormlyModule.forChild({\r\n      types: [\r\n        {\r\n          name: 'modal',\r\n          component: COMPONENT\r\n        }\r\n      ]\r\n    })\r\n  ]\r\n})\r\nexport class FormlyNzModalModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1"],"mappings":"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"}