{"version":3,"file":"freezesoul-nz-formly-dropdown-wrapper.mjs","sources":["../../../lib/dropdown-wrapper/dropdown.extension.ts","../../../lib/dropdown-wrapper/dropdown-wrapper.component.ts","../../../lib/dropdown-wrapper/dropdown-wrapper.module.ts","../../../lib/dropdown-wrapper/freezesoul-nz-formly-dropdown-wrapper.ts"],"sourcesContent":["import { FormlyFieldConfig } from '@ngx-formly/core';\r\n\r\nexport function dropdownExtension(field: FormlyFieldConfig) {\r\n  if (!field.props || (field.wrappers && field.wrappers.indexOf('dropdown-wrapper') !== -1)) {\r\n    return;\r\n  }\r\n\r\n  if (field.props?.nzDropdown?.ref) {\r\n    field.wrappers = [...(field.wrappers || []), 'dropdown-wrapper'];\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, OnDestroy, OnInit, Optional, ViewChild } from '@angular/core';\r\nimport { FieldWrapper } from '@ngx-formly/core';\r\nimport { NzDropDownDirective, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\r\nimport { Subscription } from 'rxjs';\r\nimport { FormlyBoxTemplates, findField } from '@freezesoul/nz-formly/common';\r\n\r\n@Component({\r\n  selector: 'nz-formly-dropdown-wrapper',\r\n  template: `\r\n    <div\r\n      nz-dropdown\r\n      style=\"display: inline-block\"\r\n      #dropdownDirective=\"nzDropdown\"\r\n      [nzDisabled]=\"props.nzDropdown.nzDisabled\"\r\n      [nzPlacement]=\"props.nzDropdown.nzPlacement || 'bottomLeft'\"\r\n      [nzBackdrop]=\"props.nzDropdown.nzBackdrop\"\r\n      [nzClickHide]=\"props.nzDropdown.nzClickHide !== false\"\r\n      [nzTrigger]=\"props.nzDropdown.nzTrigger || 'hover'\"\r\n      [nzMatchWidthElement]=\"props.nzDropdown.nzMatchWidthElement\"\r\n      [nzOverlayClassName]=\"props.nzDropdown.nzOverlayClassName\"\r\n      [nzOverlayStyle]=\"props.nzDropdown.nzOverlayStyle\"\r\n      (nzVisibleChange)=\"props.nzDropdown.nzVisibleChange?.($event, field, dropdownDirective)\"\r\n    >\r\n      <ng-container #fieldComponent></ng-container>\r\n    </div>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DropdownWrapperComponent extends FieldWrapper implements OnInit, OnDestroy {\r\n  @ViewChild('dropdownDirective', { read: NzDropDownDirective, static: true }) dropdownDirective!: NzDropDownDirective;\r\n  private subscription?: Subscription;\r\n  constructor(@Optional() public fieldTemplates: FormlyBoxTemplates) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const dropdownField = findField(this.field, this.props.nzDropdown.ref);\r\n    if (!dropdownField) {\r\n      return;\r\n    }\r\n\r\n    const subject = dropdownField.props!._subject;\r\n    this.subscription = subject.subscribe((instance: NzDropdownMenuComponent) => {\r\n      this.dropdownDirective.nzDropdownMenu = instance;\r\n      this.dropdownDirective.ngAfterViewInit();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.subscription) {\r\n      this.subscription.unsubscribe();\r\n      this.subscription = undefined;\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\r\nimport { DropdownWrapperComponent } from './dropdown-wrapper.component';\r\nimport { FormlyModule } from '@ngx-formly/core';\r\nimport { dropdownExtension } from './dropdown.extension';\r\n\r\nconst COMPONENT = DropdownWrapperComponent;\r\n\r\n@NgModule({\r\n  declarations: [COMPONENT],\r\n  imports: [\r\n    CommonModule,\r\n    NzDropDownModule,\r\n    FormlyModule.forChild({\r\n      wrappers: [\r\n        {\r\n          name: 'dropdown-wrapper',\r\n          component: COMPONENT\r\n        }\r\n      ],\r\n      extensions: [{ name: 'dropdown', extension: { postPopulate: dropdownExtension } }]\r\n    })\r\n  ]\r\n})\r\nexport class FormlyDropdownWrapperModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1"],"mappings":"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"}