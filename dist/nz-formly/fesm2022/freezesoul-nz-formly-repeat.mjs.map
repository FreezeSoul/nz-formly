{"version":3,"file":"freezesoul-nz-formly-repeat.mjs","sources":["../../../lib/repeat/repeat.component.ts","../../../lib/repeat/repeat.module.ts","../../../lib/repeat/freezesoul-nz-formly-repeat.ts"],"sourcesContent":["import { ChangeDetectionStrategy, Component, Optional } from '@angular/core';\r\nimport { FieldArrayType } from '@ngx-formly/core';\r\nimport { FormlyBoxTemplates, resolveTplName } from '@freezesoul/nz-formly/common';\r\n\r\n@Component({\r\n  selector: 'nz-formly-repeat',\r\n  template: `\r\n    <div class=\"repeat-view\" [formlyAttributes]=\"field\" [style.max-height]=\"props.maxHeight\">\r\n      <div *ngFor=\"let f of field.fieldGroup; let i = index\" class=\"repeat-row\">\r\n        <formly-field class=\"repeat-col\" [field]=\"f\"></formly-field>\r\n\r\n        <ng-container *nzStringTemplateOutlet=\"removeButton; context: { $implicit: this, field: f }\">\r\n          <button class=\"repeat-close\" type=\"button\" (click)=\"remove(i)\">×</button>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"props.showAdd\">\r\n      <ng-container *nzStringTemplateOutlet=\"addButton; context: { $implicit: this, field: field }\">\r\n        <button nz-button nzType=\"primary\" type=\"button\" (click)=\"add()\">\r\n          <i nz-icon nzType=\"plus\"></i>\r\n          {{ props.addButton }}\r\n        </button>\r\n      </ng-container>\r\n    </div>\r\n  `,\r\n  styles: [\r\n    `\r\n      .repeat-view {\r\n        overflow: auto;\r\n      }\r\n      .repeat-row {\r\n        display: flex;\r\n        align-items: baseline;\r\n      }\r\n\r\n      .repeat-col {\r\n        flex: 1 0 0;\r\n      }\r\n\r\n      .repeat-close {\r\n        background-color: transparent;\r\n        font-size: 24px;\r\n        border: 0;\r\n        opacity: 0.2;\r\n        line-height: 1;\r\n        padding: 0;\r\n        color: #000;\r\n        text-shadow: 0 1px 0 #fff;\r\n        cursor: pointer;\r\n        margin-left: 10px;\r\n        position: relative;\r\n        top: 2px;\r\n      }\r\n\r\n      .repeat-close:hover {\r\n        opacity: 1;\r\n        color: #ff4d4f;\r\n      }\r\n    `\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FormlyFieldRepeatComponent extends FieldArrayType {\r\n  override defaultOptions = {\r\n    props: { showAdd: true, addButton: '添加', maxHeight: '300px' }\r\n  };\r\n\r\n  constructor(@Optional() public fieldTemplates: FormlyBoxTemplates) {\r\n    super();\r\n  }\r\n\r\n  get addButton() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'addButton');\r\n  }\r\n\r\n  get removeButton() {\r\n    return resolveTplName(this.props, this.fieldTemplates, 'removeButton');\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { FormlyModule } from '@ngx-formly/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormlyFieldRepeatComponent } from './repeat.component';\r\nimport { NzButtonModule } from 'ng-zorro-antd/button';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzOutletModule } from 'ng-zorro-antd/core/outlet';\r\n\r\nconst COMPONENT = FormlyFieldRepeatComponent;\r\n\r\n@NgModule({\r\n  declarations: [COMPONENT],\r\n  imports: [\r\n    CommonModule,\r\n    NzButtonModule,\r\n    FormlyModule.forChild({\r\n      types: [\r\n        {\r\n          name: 'repeat',\r\n          component: COMPONENT\r\n        }\r\n      ]\r\n    }),\r\n    NzIconModule,\r\n    NzOutletModule\r\n  ]\r\n})\r\nexport class FormlyRepeatModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}